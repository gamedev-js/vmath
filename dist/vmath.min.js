(function(m){"use strict";const t=Math.PI/180;const n=180/Math.PI;const r=1e-6;function a(m,t){return Math.abs(m-t)<=r*Math.max(1,Math.abs(m),Math.abs(t))}function u(m,t,n){n=n||r;return Math.abs(m-t)<=n}function e(m,t,n){return m<t?t:m>n?n:m}function i(m){return m<0?0:m>1?1:m}function o(m,t,n){return m+(t-m)*n}function s(m){return m*t}function c(m){return m*n}const h=Math.random;function f(m,t){return Math.random()*(t-m)+m}function M(m,t){return Math.floor(this.randomRange(m,t))}function x(m){--m;m=m>>1|m;m=m>>2|m;m=m>>4|m;m=m>>8|m;m=m>>16|m;++m;return m}const y=32;const l=2147483647;const b=-1<<y-1;function z(m){return(m>0)-(m<0)}function w(m){let t=m>>y-1;return(m^t)-t}function d(m,t){return t^(m^t)&-(m<t)}function g(m,t){return m^(m^t)&-(m<t)}function p(m){return!(m&m-1)&&!!m}function q(m){let t,n;t=(m>65535)<<4;m>>>=t;n=(m>255)<<3;m>>>=n;t|=n;n=(m>15)<<2;m>>>=n;t|=n;n=(m>3)<<1;m>>>=n;t|=n;return t|m>>1}function v(m){return m>=1e9?9:m>=1e8?8:m>=1e7?7:m>=1e6?6:m>=1e5?5:m>=1e4?4:m>=1e3?3:m>=100?2:m>=10?1:0}function A(m){m=m-(m>>>1&1431655765);m=(m&858993459)+(m>>>2&858993459);return(m+(m>>>4)&252645135)*16843009>>>24}function S(m){let t=32;m&=-m;if(m)t--;if(m&65535)t-=16;if(m&16711935)t-=8;if(m&252645135)t-=4;if(m&858993459)t-=2;if(m&1431655765)t-=1;return t}function I(m){m+=m===0;--m;m|=m>>>1;m|=m>>>2;m|=m>>>4;m|=m>>>8;m|=m>>>16;return m+1}function L(m){m|=m>>>1;m|=m>>>2;m|=m>>>4;m|=m>>>8;m|=m>>>16;return m-(m>>>1)}function E(m){m^=m>>>16;m^=m>>>8;m^=m>>>4;m&=15;return 27030>>>m&1}const P=new Array(256);(function(m){for(let t=0;t<256;++t){let n=t,r=t,a=7;for(n>>>=1;n;n>>>=1){r<<=1;r|=n&1;--a}m[t]=r<<a&255}})(P);function D(m){return P[m&255]<<24|P[m>>>8&255]<<16|P[m>>>16&255]<<8|P[m>>>24&255]}function R(m,t){m&=65535;m=(m|m<<8)&16711935;m=(m|m<<4)&252645135;m=(m|m<<2)&858993459;m=(m|m<<1)&1431655765;t&=65535;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return m|t<<1}function T(m,t){m=m>>>t&1431655765;m=(m|m>>>1)&858993459;m=(m|m>>>2)&252645135;m=(m|m>>>4)&16711935;m=(m|m>>>16)&65535;return m<<16>>16}function j(m,t,n){m&=1023;m=(m|m<<16)&4278190335;m=(m|m<<8)&251719695;m=(m|m<<4)&3272356035;m=(m|m<<2)&1227133513;t&=1023;t=(t|t<<16)&4278190335;t=(t|t<<8)&251719695;t=(t|t<<4)&3272356035;t=(t|t<<2)&1227133513;m|=t<<1;n&=1023;n=(n|n<<16)&4278190335;n=(n|n<<8)&251719695;n=(n|n<<4)&3272356035;n=(n|n<<2)&1227133513;return m|n<<2}function N(m,t){m=m>>>t&1227133513;m=(m|m>>>2)&3272356035;m=(m|m>>>4)&251719695;m=(m|m>>>8)&4278190335;m=(m|m>>>16)&1023;return m<<22>>22}function X(m){let t=m|m-1;return t+1|(~t&-~t)-1>>>S(m)+1}var Z=Object.freeze({INT_BITS:y,INT_MAX:l,INT_MIN:b,sign:z,abs:w,min:d,max:g,isPow2:p,log2:q,log10:v,popCount:A,countTrailingZeros:S,nextPow2:I,prevPow2:L,parity:E,reverse:D,interleave2:R,deinterleave2:T,interleave3:j,deinterleave3:N,nextCombination:X});class O{constructor(m,t){this.x=m;this.y=t}}let Q={};Q.create=function(){return new O(0,0)};Q.new=function(m,t){return new O(m,t)};Q.clone=function(m){return new O(m.x,m.y)};Q.copy=function(m,t){m.x=t.x;m.y=t.y;return m};Q.set=function(m,t,n){m.x=t;m.y=n;return m};Q.add=function(m,t,n){m.x=t.x+n.x;m.y=t.y+n.y;return m};Q.subtract=function(m,t,n){m.x=t.x-n.x;m.y=t.y-n.y;return m};Q.sub=Q.subtract;Q.multiply=function(m,t,n){m.x=t.x*n.x;m.y=t.y*n.y;return m};Q.mul=Q.multiply;Q.divide=function(m,t,n){m.x=t.x/n.x;m.y=t.y/n.y;return m};Q.div=Q.divide;Q.ceil=function(m,t){m.x=Math.ceil(t.x);m.y=Math.ceil(t.y);return m};Q.floor=function(m,t){m.x=Math.floor(t.x);m.y=Math.floor(t.y);return m};Q.min=function(m,t,n){m.x=Math.min(t.x,n.x);m.y=Math.min(t.y,n.y);return m};Q.max=function(m,t,n){m.x=Math.max(t.x,n.x);m.y=Math.max(t.y,n.y);return m};Q.round=function(m,t){m.x=Math.round(t.x);m.y=Math.round(t.y);return m};Q.scale=function(m,t,n){m.x=t.x*n;m.y=t.y*n;return m};Q.scaleAndAdd=function(m,t,n,r){m.x=t.x+n.x*r;m.y=t.y+n.y*r;return m};Q.distance=function(m,t){let n=t.x-m.x,r=t.y-m.y;return Math.sqrt(n*n+r*r)};Q.dist=Q.distance;Q.squaredDistance=function(m,t){let n=t.x-m.x,r=t.y-m.y;return n*n+r*r};Q.sqrDist=Q.squaredDistance;Q.length=function(m){let t=m.x,n=m.y;return Math.sqrt(t*t+n*n)};Q.len=Q.length;Q.squaredLength=function(m){let t=m.x,n=m.y;return t*t+n*n};Q.sqrLen=Q.squaredLength;Q.negate=function(m,t){m.x=-t.x;m.y=-t.y;return m};Q.inverse=function(m,t){m.x=1/t.x;m.y=1/t.y;return m};Q.inverseSafe=function(m,t){let n=t.x,a=t.y;if(Math.abs(n)<r){m.x=0}else{m.x=1/n}if(Math.abs(a)<r){m.y=0}else{m.y=1/t.y}return m};Q.normalize=function(m,t){let n=t.x,r=t.y;let a=n*n+r*r;if(a>0){a=1/Math.sqrt(a);m.x=t.x*a;m.y=t.y*a}return m};Q.dot=function(m,t){return m.x*t.x+m.y*t.y};Q.cross=function(m,t,n){let r=t.x*n.y-t.y*n.x;m.x=m.y=0;m.z=r;return m};Q.lerp=function(m,t,n,r){let a=t.x,u=t.y;m.x=a+r*(n.x-a);m.y=u+r*(n.y-u);return m};Q.random=function(m,t){t=t||1;let n=h()*2*Math.PI;m.x=Math.cos(n)*t;m.y=Math.sin(n)*t;return m};Q.transformMat2=function(m,t,n){let r=t.x,a=t.y;m.x=n.m00*r+n.m02*a;m.y=n.m01*r+n.m03*a;return m};Q.transformMat23=function(m,t,n){let r=t.x,a=t.y;m.x=n.m00*r+n.m02*a+n.m04;m.y=n.m01*r+n.m03*a+n.m05;return m};Q.transformMat3=function(m,t,n){let r=t.x,a=t.y;m.x=n.m00*r+n.m03*a+n.m06;m.y=n.m01*r+n.m04*a+n.m07;return m};Q.transformMat4=function(m,t,n){let r=t.x,a=t.y;m.x=n.m00*r+n.m04*a+n.m12;m.y=n.m01*r+n.m05*a+n.m13;return m};Q.forEach=function(){let m=Q.create();return function(t,n,r,a,u,e){let i,o;if(!n){n=2}if(!r){r=0}if(a){o=Math.min(a*n+r,t.length)}else{o=t.length}for(i=r;i<o;i+=n){m.x=t[i];m.y=t[i+1];u(m,m,e);t[i]=m.x;t[i+1]=m.y}return t}}();Q.str=function(m){return`vec2(${m.x}, ${m.y})`};Q.array=function(m,t){m[0]=t.x;m[1]=t.y;return m};Q.exactEquals=function(m,t){return m.x===t.x&&m.y===t.y};Q.equals=function(m,t){let n=m.x,a=m.y;let u=t.x,e=t.y;return Math.abs(n-u)<=r*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-e)<=r*Math.max(1,Math.abs(a),Math.abs(e))};class U{constructor(m,t,n){this.x=m;this.y=t;this.z=n}}let V={};V.create=function(){return new U(0,0,0)};V.new=function(m,t,n){return new U(m,t,n)};V.clone=function(m){return new U(m.x,m.y,m.z)};V.copy=function(m,t){m.x=t.x;m.y=t.y;m.z=t.z;return m};V.set=function(m,t,n,r){m.x=t;m.y=n;m.z=r;return m};V.add=function(m,t,n){m.x=t.x+n.x;m.y=t.y+n.y;m.z=t.z+n.z;return m};V.subtract=function(m,t,n){m.x=t.x-n.x;m.y=t.y-n.y;m.z=t.z-n.z;return m};V.sub=V.subtract;V.multiply=function(m,t,n){m.x=t.x*n.x;m.y=t.y*n.y;m.z=t.z*n.z;return m};V.mul=V.multiply;V.divide=function(m,t,n){m.x=t.x/n.x;m.y=t.y/n.y;m.z=t.z/n.z;return m};V.div=V.divide;V.ceil=function(m,t){m.x=Math.ceil(t.x);m.y=Math.ceil(t.y);m.z=Math.ceil(t.z);return m};V.floor=function(m,t){m.x=Math.floor(t.x);m.y=Math.floor(t.y);m.z=Math.floor(t.z);return m};V.min=function(m,t,n){m.x=Math.min(t.x,n.x);m.y=Math.min(t.y,n.y);m.z=Math.min(t.z,n.z);return m};V.max=function(m,t,n){m.x=Math.max(t.x,n.x);m.y=Math.max(t.y,n.y);m.z=Math.max(t.z,n.z);return m};V.round=function(m,t){m.x=Math.round(t.x);m.y=Math.round(t.y);m.z=Math.round(t.z);return m};V.scale=function(m,t,n){m.x=t.x*n;m.y=t.y*n;m.z=t.z*n;return m};V.scaleAndAdd=function(m,t,n,r){m.x=t.x+n.x*r;m.y=t.y+n.y*r;m.z=t.z+n.z*r;return m};V.distance=function(m,t){let n=t.x-m.x,r=t.y-m.y,a=t.z-m.z;return Math.sqrt(n*n+r*r+a*a)};V.dist=V.distance;V.squaredDistance=function(m,t){let n=t.x-m.x,r=t.y-m.y,a=t.z-m.z;return n*n+r*r+a*a};V.sqrDist=V.squaredDistance;V.length=function(m){let t=m.x,n=m.y,r=m.z;return Math.sqrt(t*t+n*n+r*r)};V.len=V.length;V.squaredLength=function(m){let t=m.x,n=m.y,r=m.z;return t*t+n*n+r*r};V.sqrLen=V.squaredLength;V.negate=function(m,t){m.x=-t.x;m.y=-t.y;m.z=-t.z;return m};V.inverse=function(m,t){m.x=1/t.x;m.y=1/t.y;m.z=1/t.z;return m};V.inverseSafe=function(m,t){let n=t.x,a=t.y,u=t.z;if(Math.abs(n)<r){m.x=0}else{m.x=1/n}if(Math.abs(a)<r){m.y=0}else{m.y=1/a}if(Math.abs(u)<r){m.z=0}else{m.z=1/u}return m};V.normalize=function(m,t){let n=t.x,r=t.y,a=t.z;let u=n*n+r*r+a*a;if(u>0){u=1/Math.sqrt(u);m.x=n*u;m.y=r*u;m.z=a*u}return m};V.dot=function(m,t){return m.x*t.x+m.y*t.y+m.z*t.z};V.cross=function(m,t,n){let r=t.x,a=t.y,u=t.z,e=n.x,i=n.y,o=n.z;m.x=a*o-u*i;m.y=u*e-r*o;m.z=r*i-a*e;return m};V.lerp=function(m,t,n,r){let a=t.x,u=t.y,e=t.z;m.x=a+r*(n.x-a);m.y=u+r*(n.y-u);m.z=e+r*(n.z-e);return m};V.hermite=function(m,t,n,r,a,u){let e=u*u,i=e*(2*u-3)+1,o=e*(u-2)+u,s=e*(u-1),c=e*(3-2*u);m.x=t.x*i+n.x*o+r.x*s+a.x*c;m.y=t.y*i+n.y*o+r.y*s+a.y*c;m.z=t.z*i+n.z*o+r.z*s+a.z*c;return m};V.bezier=function(m,t,n,r,a,u){let e=1-u,i=e*e,o=u*u,s=i*e,c=3*u*i,h=3*o*e,f=o*u;m.x=t.x*s+n.x*c+r.x*h+a.x*f;m.y=t.y*s+n.y*c+r.y*h+a.y*f;m.z=t.z*s+n.z*c+r.z*h+a.z*f;return m};V.random=function(m,t){t=t||1;let n=h()*2*Math.PI;let r=h()*2-1;let a=Math.sqrt(1-r*r)*t;m.x=Math.cos(n)*a;m.y=Math.sin(n)*a;m.z=r*t;return m};V.transformMat4=function(m,t,n){let r=t.x,a=t.y,u=t.z,e=n.m03*r+n.m07*a+n.m11*u+n.m15;e=e||1;m.x=(n.m00*r+n.m04*a+n.m08*u+n.m12)/e;m.y=(n.m01*r+n.m05*a+n.m09*u+n.m13)/e;m.z=(n.m02*r+n.m06*a+n.m10*u+n.m14)/e;return m};V.transformMat3=function(m,t,n){let r=t.x,a=t.y,u=t.z;m.x=r*n.m00+a*n.m03+u*n.m06;m.y=r*n.m01+a*n.m04+u*n.m07;m.z=r*n.m02+a*n.m05+u*n.m08;return m};V.transformQuat=function(m,t,n){let r=t.x,a=t.y,u=t.z;let e=n.x,i=n.y,o=n.z,s=n.w;let c=s*r+i*u-o*a;let h=s*a+o*r-e*u;let f=s*u+e*a-i*r;let M=-e*r-i*a-o*u;m.x=c*s+M*-e+h*-o-f*-i;m.y=h*s+M*-i+f*-e-c*-o;m.z=f*s+M*-o+c*-i-h*-e;return m};V.rotateX=function(m,t,n,r){let a=[],u=[];a.x=t.x-n.x;a.y=t.y-n.y;a.z=t.z-n.z;u.x=a.x;u.y=a.y*Math.cos(r)-a.z*Math.sin(r);u.z=a.y*Math.sin(r)+a.z*Math.cos(r);m.x=u.x+n.x;m.y=u.y+n.y;m.z=u.z+n.z;return m};V.rotateY=function(m,t,n,r){let a=[],u=[];a.x=t.x-n.x;a.y=t.y-n.y;a.z=t.z-n.z;u.x=a.z*Math.sin(r)+a.x*Math.cos(r);u.y=a.y;u.z=a.z*Math.cos(r)-a.x*Math.sin(r);m.x=u.x+n.x;m.y=u.y+n.y;m.z=u.z+n.z;return m};V.rotateZ=function(m,t,n,r){let a=[],u=[];a.x=t.x-n.x;a.y=t.y-n.y;a.z=t.z-n.z;u.x=a.x*Math.cos(r)-a.y*Math.sin(r);u.y=a.x*Math.sin(r)+a.y*Math.cos(r);u.z=a.z;m.x=u.x+n.x;m.y=u.y+n.y;m.z=u.z+n.z;return m};V.forEach=function(){let m=V.create();return function(t,n,r,a,u,e){let i,o;if(!n){n=3}if(!r){r=0}if(a){o=Math.min(a*n+r,t.length)}else{o=t.length}for(i=r;i<o;i+=n){m.x=t[i];m.y=t[i+1];m.z=t[i+2];u(m,m,e);t[i]=m.x;t[i+1]=m.y;t[i+2]=m.z}return t}}();V.angle=function(){let m=V.create();let t=V.create();return function(n,r){V.copy(m,n);V.copy(t,r);V.normalize(m,m);V.normalize(t,t);let a=V.dot(m,t);if(a>1){return 0}if(a<-1){return Math.PI}return Math.acos(a)}}();V.str=function(m){return`vec3(${m.x}, ${m.y}, ${m.z})`};V.array=function(m,t){m[0]=t.x;m[1]=t.y;m[2]=t.z;return m};V.exactEquals=function(m,t){return m.x===t.x&&m.y===t.y&&m.z===t.z};V.equals=function(m,t){let n=m.x,a=m.y,u=m.z;let e=t.x,i=t.y,o=t.z;return Math.abs(n-e)<=r*Math.max(1,Math.abs(n),Math.abs(e))&&Math.abs(a-i)<=r*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(u-o)<=r*Math.max(1,Math.abs(u),Math.abs(o))};class Y{constructor(m,t,n,r){this.x=m;this.y=t;this.z=n;this.w=r}}let F={};F.create=function(){return new Y(0,0,0,0)};F.new=function(m,t,n,r){return new Y(m,t,n,r)};F.clone=function(m){return new Y(m.x,m.y,m.z,m.w)};F.copy=function(m,t){m.x=t.x;m.y=t.y;m.z=t.z;m.w=t.w;return m};F.set=function(m,t,n,r,a){m.x=t;m.y=n;m.z=r;m.w=a;return m};F.add=function(m,t,n){m.x=t.x+n.x;m.y=t.y+n.y;m.z=t.z+n.z;m.w=t.w+n.w;return m};F.subtract=function(m,t,n){m.x=t.x-n.x;m.y=t.y-n.y;m.z=t.z-n.z;m.w=t.w-n.w;return m};F.sub=F.subtract;F.multiply=function(m,t,n){m.x=t.x*n.x;m.y=t.y*n.y;m.z=t.z*n.z;m.w=t.w*n.w;return m};F.mul=F.multiply;F.divide=function(m,t,n){m.x=t.x/n.x;m.y=t.y/n.y;m.z=t.z/n.z;m.w=t.w/n.w;return m};F.div=F.divide;F.ceil=function(m,t){m.x=Math.ceil(t.x);m.y=Math.ceil(t.y);m.z=Math.ceil(t.z);m.w=Math.ceil(t.w);return m};F.floor=function(m,t){m.x=Math.floor(t.x);m.y=Math.floor(t.y);m.z=Math.floor(t.z);m.w=Math.floor(t.w);return m};F.min=function(m,t,n){m.x=Math.min(t.x,n.x);m.y=Math.min(t.y,n.y);m.z=Math.min(t.z,n.z);m.w=Math.min(t.w,n.w);return m};F.max=function(m,t,n){m.x=Math.max(t.x,n.x);m.y=Math.max(t.y,n.y);m.z=Math.max(t.z,n.z);m.w=Math.max(t.w,n.w);return m};F.round=function(m,t){m.x=Math.round(t.x);m.y=Math.round(t.y);m.z=Math.round(t.z);m.w=Math.round(t.w);return m};F.scale=function(m,t,n){m.x=t.x*n;m.y=t.y*n;m.z=t.z*n;m.w=t.w*n;return m};F.scaleAndAdd=function(m,t,n,r){m.x=t.x+n.x*r;m.y=t.y+n.y*r;m.z=t.z+n.z*r;m.w=t.w+n.w*r;return m};F.distance=function(m,t){let n=t.x-m.x,r=t.y-m.y,a=t.z-m.z,u=t.w-m.w;return Math.sqrt(n*n+r*r+a*a+u*u)};F.dist=F.distance;F.squaredDistance=function(m,t){let n=t.x-m.x,r=t.y-m.y,a=t.z-m.z,u=t.w-m.w;return n*n+r*r+a*a+u*u};F.sqrDist=F.squaredDistance;F.length=function(m){let t=m.x,n=m.y,r=m.z,a=m.w;return Math.sqrt(t*t+n*n+r*r+a*a)};F.len=F.length;F.squaredLength=function(m){let t=m.x,n=m.y,r=m.z,a=m.w;return t*t+n*n+r*r+a*a};F.sqrLen=F.squaredLength;F.negate=function(m,t){m.x=-t.x;m.y=-t.y;m.z=-t.z;m.w=-t.w;return m};F.inverse=function(m,t){m.x=1/t.x;m.y=1/t.y;m.z=1/t.z;m.w=1/t.w;return m};F.inverseSafe=function(m,t){let n=t.x,a=t.y,u=t.z,e=t.w;if(Math.abs(n)<r){m.x=0}else{m.x=1/n}if(Math.abs(a)<r){m.y=0}else{m.y=1/a}if(Math.abs(u)<r){m.z=0}else{m.z=1/u}if(Math.abs(e)<r){m.w=0}else{m.w=1/e}return m};F.normalize=function(m,t){let n=t.x,r=t.y,a=t.z,u=t.w;let e=n*n+r*r+a*a+u*u;if(e>0){e=1/Math.sqrt(e);m.x=n*e;m.y=r*e;m.z=a*e;m.w=u*e}return m};F.dot=function(m,t){return m.x*t.x+m.y*t.y+m.z*t.z+m.w*t.w};F.lerp=function(m,t,n,r){let a=t.x,u=t.y,e=t.z,i=t.w;m.x=a+r*(n.x-a);m.y=u+r*(n.y-u);m.z=e+r*(n.z-e);m.w=i+r*(n.w-i);return m};F.random=function(m,t){t=t||1;m.x=h();m.y=h();m.z=h();m.w=h();F.normalize(m,m);F.scale(m,m,t);return m};F.transformMat4=function(m,t,n){let r=t.x,a=t.y,u=t.z,e=t.w;m.x=n.m00*r+n.m04*a+n.m08*u+n.m12*e;m.y=n.m01*r+n.m05*a+n.m09*u+n.m13*e;m.z=n.m02*r+n.m06*a+n.m10*u+n.m14*e;m.w=n.m03*r+n.m07*a+n.m11*u+n.m15*e;return m};F.transformQuat=function(m,t,n){let r=t.x,a=t.y,u=t.z;let e=n.x,i=n.y,o=n.z,s=n.w;let c=s*r+i*u-o*a;let h=s*a+o*r-e*u;let f=s*u+e*a-i*r;let M=-e*r-i*a-o*u;m.x=c*s+M*-e+h*-o-f*-i;m.y=h*s+M*-i+f*-e-c*-o;m.z=f*s+M*-o+c*-i-h*-e;m.w=t.w;return m};F.forEach=function(){let m=F.create();return function(t,n,r,a,u,e){let i,o;if(!n){n=4}if(!r){r=0}if(a){o=Math.min(a*n+r,t.length)}else{o=t.length}for(i=r;i<o;i+=n){m.x=t[i];m.y=t[i+1];m.z=t[i+2];m.w=t[i+3];u(m,m,e);t[i]=m.x;t[i+1]=m.y;t[i+2]=m.z;t[i+3]=m.w}return t}}();F.str=function(m){return`vec4(${m.x}, ${m.y}, ${m.z}, ${m.w})`};F.array=function(m,t){m[0]=t.x;m[1]=t.y;m[2]=t.z;m[3]=t.w;return m};F.exactEquals=function(m,t){return m.x===t.x&&m.y===t.y&&m.z===t.z&&m.w===t.w};F.equals=function(m,t){let n=m.x,a=m.y,u=m.z,e=m.w;let i=t.x,o=t.y,s=t.z,c=t.w;return Math.abs(n-i)<=r*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-o)<=r*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(u-s)<=r*Math.max(1,Math.abs(u),Math.abs(s))&&Math.abs(e-c)<=r*Math.max(1,Math.abs(e),Math.abs(c))};class _{constructor(m,t,n,r,a,u,e,i,o){this.m00=m;this.m01=t;this.m02=n;this.m03=r;this.m04=a;this.m05=u;this.m06=e;this.m07=i;this.m08=o}}let C={};C.create=function(){return new _(1,0,0,0,1,0,0,0,1)};C.new=function(m,t,n,r,a,u,e,i,o){return new _(m,t,n,r,a,u,e,i,o)};C.clone=function(m){return new _(m.m00,m.m01,m.m02,m.m03,m.m04,m.m05,m.m06,m.m07,m.m08)};C.copy=function(m,t){m.m00=t.m00;m.m01=t.m01;m.m02=t.m02;m.m03=t.m03;m.m04=t.m04;m.m05=t.m05;m.m06=t.m06;m.m07=t.m07;m.m08=t.m08;return m};C.set=function(m,t,n,r,a,u,e,i,o,s){m.m00=t;m.m01=n;m.m02=r;m.m03=a;m.m04=u;m.m05=e;m.m06=i;m.m07=o;m.m08=s;return m};C.identity=function(m){m.m00=1;m.m01=0;m.m02=0;m.m03=0;m.m04=1;m.m05=0;m.m06=0;m.m07=0;m.m08=1;return m};C.transpose=function(m,t){if(m===t){let n=t.m01,r=t.m02,a=t.m05;m.m01=t.m03;m.m02=t.m06;m.m03=n;m.m05=t.m07;m.m06=r;m.m07=a}else{m.m00=t.m00;m.m01=t.m03;m.m02=t.m06;m.m03=t.m01;m.m04=t.m04;m.m05=t.m07;m.m06=t.m02;m.m07=t.m05;m.m08=t.m08}return m};C.invert=function(m,t){let n=t.m00,r=t.m01,a=t.m02,u=t.m03,e=t.m04,i=t.m05,o=t.m06,s=t.m07,c=t.m08;let h=c*e-i*s;let f=-c*u+i*o;let M=s*u-e*o;let x=n*h+r*f+a*M;if(!x){return null}x=1/x;m.m00=h*x;m.m01=(-c*r+a*s)*x;m.m02=(i*r-a*e)*x;m.m03=f*x;m.m04=(c*n-a*o)*x;m.m05=(-i*n+a*u)*x;m.m06=M*x;m.m07=(-s*n+r*o)*x;m.m08=(e*n-r*u)*x;return m};C.adjoint=function(m,t){let n=t.m00,r=t.m01,a=t.m02,u=t.m03,e=t.m04,i=t.m05,o=t.m06,s=t.m07,c=t.m08;m.m00=e*c-i*s;m.m01=a*s-r*c;m.m02=r*i-a*e;m.m03=i*o-u*c;m.m04=n*c-a*o;m.m05=a*u-n*i;m.m06=u*s-e*o;m.m07=r*o-n*s;m.m08=n*e-r*u;return m};C.determinant=function(m){let t=m.m00,n=m.m01,r=m.m02,a=m.m03,u=m.m04,e=m.m05,i=m.m06,o=m.m07,s=m.m08;return t*(s*u-e*o)+n*(-s*a+e*i)+r*(o*a-u*i)};C.multiply=function(m,t,n){let r=t.m00,a=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=t.m06,c=t.m07,h=t.m08;let f=n.m00,M=n.m01,x=n.m02;let y=n.m03,l=n.m04,b=n.m05;let z=n.m06,w=n.m07,d=n.m08;m.m00=f*r+M*e+x*s;m.m01=f*a+M*i+x*c;m.m02=f*u+M*o+x*h;m.m03=y*r+l*e+b*s;m.m04=y*a+l*i+b*c;m.m05=y*u+l*o+b*h;m.m06=z*r+w*e+d*s;m.m07=z*a+w*i+d*c;m.m08=z*u+w*o+d*h;return m};C.mul=C.multiply;C.translate=function(m,t,n){let r=t.m00,a=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=t.m06,c=t.m07,h=t.m08;let f=n.x,M=n.y;m.m00=r;m.m01=a;m.m02=u;m.m03=e;m.m04=i;m.m05=o;m.m06=f*r+M*e+s;m.m07=f*a+M*i+c;m.m08=f*u+M*o+h;return m};C.rotate=function(m,t,n){let r=t.m00,a=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=t.m06,c=t.m07,h=t.m08;let f=Math.sin(n);let M=Math.cos(n);m.m00=M*r+f*e;m.m01=M*a+f*i;m.m02=M*u+f*o;m.m03=M*e-f*r;m.m04=M*i-f*a;m.m05=M*o-f*u;m.m06=s;m.m07=c;m.m08=h;return m};C.scale=function(m,t,n){let r=n.x,a=n.y;m.m00=r*t.m00;m.m01=r*t.m01;m.m02=r*t.m02;m.m03=a*t.m03;m.m04=a*t.m04;m.m05=a*t.m05;m.m06=t.m06;m.m07=t.m07;m.m08=t.m08;return m};C.fromMat4=function(m,t){m.m00=t.m00;m.m01=t.m01;m.m02=t.m02;m.m03=t.m04;m.m04=t.m05;m.m05=t.m06;m.m06=t.m08;m.m07=t.m09;m.m08=t.m10;return m};C.fromTranslation=function(m,t){m.m00=1;m.m01=0;m.m02=0;m.m03=0;m.m04=1;m.m05=0;m.m06=t.x;m.m07=t.y;m.m08=1;return m};C.fromRotation=function(m,t){let n=Math.sin(t),r=Math.cos(t);m.m00=r;m.m01=n;m.m02=0;m.m03=-n;m.m04=r;m.m05=0;m.m06=0;m.m07=0;m.m08=1;return m};C.fromScaling=function(m,t){m.m00=t.x;m.m01=0;m.m02=0;m.m03=0;m.m04=t.y;m.m05=0;m.m06=0;m.m07=0;m.m08=1;return m};C.fromMat2d=function(m,t){m.m00=t.m00;m.m01=t.m01;m.m02=0;m.m03=t.m02;m.m04=t.m03;m.m05=0;m.m06=t.m04;m.m07=t.m05;m.m08=1;return m};C.fromQuat=function(m,t){let n=t.x,r=t.y,a=t.z,u=t.w;let e=n+n;let i=r+r;let o=a+a;let s=n*e;let c=r*e;let h=r*i;let f=a*e;let M=a*i;let x=a*o;let y=u*e;let l=u*i;let b=u*o;m.m00=1-h-x;m.m03=c-b;m.m06=f+l;m.m01=c+b;m.m04=1-s-x;m.m07=M-y;m.m02=f-l;m.m05=M+y;m.m08=1-s-h;return m};C.fromViewUp=function(){let m=V.new(0,1,0);let t=V.create();let n=V.create();return function(a,u,e){if(V.sqrLen(u)<r*r){C.identity(a);return a}e=e||m;V.cross(t,e,u);if(V.sqrLen(t)<r*r){C.identity(a);return a}V.cross(n,u,t);C.set(a,t.x,t.y,t.z,n.x,n.y,n.z,u.x,u.y,u.z);return a}}();C.normalFromMat4=function(m,t){let n=t.m00,r=t.m01,a=t.m02,u=t.m03,e=t.m04,i=t.m05,o=t.m06,s=t.m07,c=t.m08,h=t.m09,f=t.m10,M=t.m11,x=t.m12,y=t.m13,l=t.m14,b=t.m15;let z=n*i-r*e;let w=n*o-a*e;let d=n*s-u*e;let g=r*o-a*i;let p=r*s-u*i;let q=a*s-u*o;let v=c*y-h*x;let A=c*l-f*x;let S=c*b-M*x;let I=h*l-f*y;let L=h*b-M*y;let E=f*b-M*l;let P=z*E-w*L+d*I+g*S-p*A+q*v;if(!P){return null}P=1/P;m.m00=(i*E-o*L+s*I)*P;m.m01=(o*S-e*E-s*A)*P;m.m02=(e*L-i*S+s*v)*P;m.m03=(a*L-r*E-u*I)*P;m.m04=(n*E-a*S+u*A)*P;m.m05=(r*S-n*L-u*v)*P;m.m06=(y*q-l*p+b*g)*P;m.m07=(l*d-x*q-b*w)*P;m.m08=(x*p-y*d+b*z)*P;return m};C.str=function(m){return`mat3(${m.m00}, ${m.m01}, ${m.m02}, ${m.m03}, ${m.m04}, ${m.m05}, ${m.m06}, ${m.m07}, ${m.m08})`};C.array=function(m,t){m[0]=t.m00;m[1]=t.m01;m[2]=t.m02;m[3]=t.m03;m[4]=t.m04;m[5]=t.m05;m[6]=t.m06;m[7]=t.m07;m[8]=t.m08;return m};C.frob=function(m){return Math.sqrt(Math.pow(m.m00,2)+Math.pow(m.m01,2)+Math.pow(m.m02,2)+Math.pow(m.m03,2)+Math.pow(m.m04,2)+Math.pow(m.m05,2)+Math.pow(m.m06,2)+Math.pow(m.m07,2)+Math.pow(m.m08,2))};C.add=function(m,t,n){m.m00=t.m00+n.m00;m.m01=t.m01+n.m01;m.m02=t.m02+n.m02;m.m03=t.m03+n.m03;m.m04=t.m04+n.m04;m.m05=t.m05+n.m05;m.m06=t.m06+n.m06;m.m07=t.m07+n.m07;m.m08=t.m08+n.m08;return m};C.subtract=function(m,t,n){m.m00=t.m00-n.m00;m.m01=t.m01-n.m01;m.m02=t.m02-n.m02;m.m03=t.m03-n.m03;m.m04=t.m04-n.m04;m.m05=t.m05-n.m05;m.m06=t.m06-n.m06;m.m07=t.m07-n.m07;m.m08=t.m08-n.m08;return m};C.sub=C.subtract;C.multiplyScalar=function(m,t,n){m.m00=t.m00*n;m.m01=t.m01*n;m.m02=t.m02*n;m.m03=t.m03*n;m.m04=t.m04*n;m.m05=t.m05*n;m.m06=t.m06*n;m.m07=t.m07*n;m.m08=t.m08*n;return m};C.multiplyScalarAndAdd=function(m,t,n,r){m.m00=t.m00+n.m00*r;m.m01=t.m01+n.m01*r;m.m02=t.m02+n.m02*r;m.m03=t.m03+n.m03*r;m.m04=t.m04+n.m04*r;m.m05=t.m05+n.m05*r;m.m06=t.m06+n.m06*r;m.m07=t.m07+n.m07*r;m.m08=t.m08+n.m08*r;return m};C.exactEquals=function(m,t){return m.m00===t.m00&&m.m01===t.m01&&m.m02===t.m02&&m.m03===t.m03&&m.m04===t.m04&&m.m05===t.m05&&m.m06===t.m06&&m.m07===t.m07&&m.m08===t.m08};C.equals=function(m,t){let n=m.m00,a=m.m01,u=m.m02,e=m.m03,i=m.m04,o=m.m05,s=m.m06,c=m.m07,h=m.m08;let f=t.m00,M=t.m01,x=t.m02,y=t.m03,l=t.m04,b=t.m05,z=t.m06,w=t.m07,d=t.m08;return Math.abs(n-f)<=r*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(a-M)<=r*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(u-x)<=r*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(e-y)<=r*Math.max(1,Math.abs(e),Math.abs(y))&&Math.abs(i-l)<=r*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-b)<=r*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(s-z)<=r*Math.max(1,Math.abs(s),Math.abs(z))&&Math.abs(c-w)<=r*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(h-d)<=r*Math.max(1,Math.abs(h),Math.abs(d))};class H{constructor(m,t,n,r){this.x=m;this.y=t;this.z=n;this.w=r}}let k={};k.create=function(){return new H(0,0,0,1)};k.new=F.new;k.clone=F.clone;k.copy=F.copy;k.set=F.set;k.identity=function(m){m.x=0;m.y=0;m.z=0;m.w=1;return m};k.rotationTo=function(){let m=V.create();let t=V.new(1,0,0);let n=V.new(0,1,0);return function(r,a,u){let e=V.dot(a,u);if(e<-.999999){V.cross(m,t,a);if(V.length(m)<1e-6){V.cross(m,n,a)}V.normalize(m,m);k.fromAxisAngle(r,m,Math.PI);return r}else if(e>.999999){r.x=0;r.y=0;r.z=0;r.w=1;return r}else{V.cross(m,a,u);r.x=m.x;r.y=m.y;r.z=m.z;r.w=1+e;return k.normalize(r,r)}}}();k.getAxisAngle=function(m,t){let n=Math.acos(t.w)*2;let r=Math.sin(n/2);if(r!=0){m.x=t.x/r;m.y=t.y/r;m.z=t.z/r}else{m.x=1;m.y=0;m.z=0}return n};k.multiply=function(m,t,n){let r=t.x,a=t.y,u=t.z,e=t.w,i=n.x,o=n.y,s=n.z,c=n.w;m.x=r*c+e*i+a*s-u*o;m.y=a*c+e*o+u*i-r*s;m.z=u*c+e*s+r*o-a*i;m.w=e*c-r*i-a*o-u*s;return m};k.mul=k.multiply;k.scale=F.scale;k.rotateX=function(m,t,n){n*=.5;let r=t.x,a=t.y,u=t.z,e=t.w,i=Math.sin(n),o=Math.cos(n);m.x=r*o+e*i;m.y=a*o+u*i;m.z=u*o-a*i;m.w=e*o-r*i;return m};k.rotateY=function(m,t,n){n*=.5;let r=t.x,a=t.y,u=t.z,e=t.w,i=Math.sin(n),o=Math.cos(n);m.x=r*o-u*i;m.y=a*o+e*i;m.z=u*o+r*i;m.w=e*o-a*i;return m};k.rotateZ=function(m,t,n){n*=.5;let r=t.x,a=t.y,u=t.z,e=t.w,i=Math.sin(n),o=Math.cos(n);m.x=r*o+a*i;m.y=a*o-r*i;m.z=u*o+e*i;m.w=e*o-u*i;return m};k.calculateW=function(m,t){let n=t.x,r=t.y,a=t.z;m.x=n;m.y=r;m.z=a;m.w=Math.sqrt(Math.abs(1-n*n-r*r-a*a));return m};k.dot=F.dot;k.lerp=F.lerp;k.slerp=function(m,t,n,r){let a=t.x,u=t.y,e=t.z,i=t.w,o=n.x,s=n.y,c=n.z,h=n.w;let f,M,x,y,l;M=a*o+u*s+e*c+i*h;if(M<0){M=-M;o=-o;s=-s;c=-c;h=-h}if(1-M>1e-6){f=Math.acos(M);x=Math.sin(f);y=Math.sin((1-r)*f)/x;l=Math.sin(r*f)/x}else{y=1-r;l=r}m.x=y*a+l*o;m.y=y*u+l*s;m.z=y*e+l*c;m.w=y*i+l*h;return m};k.sqlerp=function(){let m=k.create();let t=k.create();return function(n,r,a,u,e,i){k.slerp(m,r,e,i);k.slerp(t,a,u,i);k.slerp(n,m,t,2*i*(1-i));return n}}();k.invert=function(m,t){let n=t.x,r=t.y,a=t.z,u=t.w;let e=n*n+r*r+a*a+u*u;let i=e?1/e:0;m.x=-n*i;m.y=-r*i;m.z=-a*i;m.w=u*i;return m};k.conjugate=function(m,t){m.x=-t.x;m.y=-t.y;m.z=-t.z;m.w=t.w;return m};k.length=F.length;k.len=k.length;k.squaredLength=F.squaredLength;k.sqrLen=k.squaredLength;k.normalize=F.normalize;k.fromAxes=function(){let m=C.create();return function(t,n,r,a){C.set(m,n.x,n.y,n.z,r.x,r.y,r.z,a.x,a.y,a.z);return k.normalize(t,k.fromMat3(t,m))}}();k.fromViewUp=function(){let m=C.create();return function(t,n,r){C.fromViewUp(m,n,r);if(!m){return null}return k.normalize(t,k.fromMat3(t,m))}}();k.fromAxisAngle=function(m,t,n){n=n*.5;let r=Math.sin(n);m.x=r*t.x;m.y=r*t.y;m.z=r*t.z;m.w=Math.cos(n);return m};k.fromMat3=function(m,t){let n=t.m00,r=t.m03,a=t.m06,u=t.m01,e=t.m04,i=t.m07,o=t.m02,s=t.m05,c=t.m08;let h=n+e+c;if(h>0){let t=.5/Math.sqrt(h+1);m.w=.25/t;m.x=(s-i)*t;m.y=(a-o)*t;m.z=(u-r)*t}else if(n>e&&n>c){let t=2*Math.sqrt(1+n-e-c);m.w=(s-i)/t;m.x=.25*t;m.y=(r+u)/t;m.z=(a+o)/t}else if(e>c){let t=2*Math.sqrt(1+e-n-c);m.w=(a-o)/t;m.x=(r+u)/t;m.y=.25*t;m.z=(i+s)/t}else{let t=2*Math.sqrt(1+c-n-e);m.w=(u-r)/t;m.x=(a+o)/t;m.y=(i+s)/t;m.z=.25*t}return m};k.fromEuler=function(m,t,n,r){let a=.5*Math.PI/180;t*=a;n*=a;r*=a;let u=Math.sin(t);let e=Math.cos(t);let i=Math.sin(n);let o=Math.cos(n);let s=Math.sin(r);let c=Math.cos(r);m.x=u*o*c-e*i*s;m.y=e*i*c+u*o*s;m.z=e*o*s-u*i*c;m.w=e*o*c+u*i*s;return m};k.str=function(m){return`quat(${m.x}, ${m.y}, ${m.z}, ${m.w})`};k.array=function(m,t){m[0]=t.x;m[1]=t.y;m[2]=t.z;m[3]=t.w;return m};k.exactEquals=F.exactEquals;k.equals=F.equals;class B{constructor(m,t,n,r){this.m00=m;this.m01=t;this.m02=n;this.m03=r}}let W={};W.create=function(){return new B(1,0,0,1)};W.new=function(m,t,n,r){return new B(m,t,n,r)};W.clone=function(m){return new B(m.m00,m.m01,m.m02,m.m03)};W.copy=function(m,t){m.m00=t.m00;m.m01=t.m01;m.m02=t.m02;m.m03=t.m03;return m};W.identity=function(m){m.m00=1;m.m01=0;m.m02=0;m.m03=1;return m};W.set=function(m,t,n,r,a){m.m00=t;m.m01=n;m.m02=r;m.m03=a;return m};W.transpose=function(m,t){if(m===t){let n=t.m01;m.m01=t.m02;m.m02=n}else{m.m00=t.m00;m.m01=t.m02;m.m02=t.m01;m.m03=t.m03}return m};W.invert=function(m,t){let n=t.m00,r=t.m01,a=t.m02,u=t.m03;let e=n*u-a*r;if(!e){return null}e=1/e;m.m00=u*e;m.m01=-r*e;m.m02=-a*e;m.m03=n*e;return m};W.adjoint=function(m,t){let n=t.m00;m.m00=t.m03;m.m01=-t.m01;m.m02=-t.m02;m.m03=n;return m};W.determinant=function(m){return m.m00*m.m03-m.m02*m.m01};W.multiply=function(m,t,n){let r=t.m00,a=t.m01,u=t.m02,e=t.m03;let i=n.m00,o=n.m01,s=n.m02,c=n.m03;m.m00=r*i+u*o;m.m01=a*i+e*o;m.m02=r*s+u*c;m.m03=a*s+e*c;return m};W.mul=W.multiply;W.rotate=function(m,t,n){let r=t.m00,a=t.m01,u=t.m02,e=t.m03,i=Math.sin(n),o=Math.cos(n);m.m00=r*o+u*i;m.m01=a*o+e*i;m.m02=r*-i+u*o;m.m03=a*-i+e*o;return m};W.scale=function(m,t,n){let r=t.m00,a=t.m01,u=t.m02,e=t.m03,i=n.x,o=n.y;m.m00=r*i;m.m01=a*i;m.m02=u*o;m.m03=e*o;return m};W.fromRotation=function(m,t){let n=Math.sin(t),r=Math.cos(t);m.m00=r;m.m01=n;m.m02=-n;m.m03=r;return m};W.fromScaling=function(m,t){m.m00=t.x;m.m01=0;m.m02=0;m.m03=t.y;return m};W.str=function(m){return`mat2(${m.m00}, ${m.m01}, ${m.m02}, ${m.m03})`};W.array=function(m,t){m[0]=t.m00;m[1]=t.m01;m[2]=t.m02;m[3]=t.m03;return m};W.frob=function(m){return Math.sqrt(Math.pow(m.m00,2)+Math.pow(m.m01,2)+Math.pow(m.m02,2)+Math.pow(m.m03,2))};W.LDU=function(m,t,n,r){m.m02=r.m02/r.m00;n.m00=r.m00;n.m01=r.m01;n.m03=r.m03-m.m02*n.m01};W.add=function(m,t,n){m.m00=t.m00+n.m00;m.m01=t.m01+n.m01;m.m02=t.m02+n.m02;m.m03=t.m03+n.m03;return m};W.subtract=function(m,t,n){m.m00=t.m00-n.m00;m.m01=t.m01-n.m01;m.m02=t.m02-n.m02;m.m03=t.m03-n.m03;return m};W.sub=W.subtract;W.exactEquals=function(m,t){return m.m00===t.m00&&m.m01===t.m01&&m.m02===t.m02&&m.m03===t.m03};W.equals=function(m,t){let n=m.m00,a=m.m01,u=m.m02,e=m.m03;let i=t.m00,o=t.m01,s=t.m02,c=t.m03;return Math.abs(n-i)<=r*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-o)<=r*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(u-s)<=r*Math.max(1,Math.abs(u),Math.abs(s))&&Math.abs(e-c)<=r*Math.max(1,Math.abs(e),Math.abs(c))};W.multiplyScalar=function(m,t,n){m.m00=t.m00*n;m.m01=t.m01*n;m.m02=t.m02*n;m.m03=t.m03*n;return m};W.multiplyScalarAndAdd=function(m,t,n,r){m.m00=t.m00+n.m00*r;m.m01=t.m01+n.m01*r;m.m02=t.m02+n.m02*r;m.m03=t.m03+n.m03*r;return m};class G{constructor(m,t,n,r,a,u){this.m00=m;this.m01=t;this.m02=n;this.m03=r;this.m04=a;this.m05=u}}let J={};J.create=function(){return new G(1,0,0,1,0,0)};J.new=function(m,t,n,r,a,u){return new G(m,t,n,r,a,u)};J.clone=function(m){return new G(m.m00,m.m01,m.m02,m.m03,m.m04,m.m05)};J.copy=function(m,t){m.m00=t.m00;m.m01=t.m01;m.m02=t.m02;m.m03=t.m03;m.m04=t.m04;m.m05=t.m05;return m};J.identity=function(m){m.m00=1;m.m01=0;m.m02=0;m.m03=1;m.m04=0;m.m05=0;return m};J.set=function(m,t,n,r,a,u,e){m.m00=t;m.m01=n;m.m02=r;m.m03=a;m.m04=u;m.m05=e;return m};J.invert=function(m,t){let n=t.m00,r=t.m01,a=t.m02,u=t.m03,e=t.m04,i=t.m05;let o=n*u-r*a;if(!o){return null}o=1/o;m.m00=u*o;m.m01=-r*o;m.m02=-a*o;m.m03=n*o;m.m04=(a*i-u*e)*o;m.m05=(r*e-n*i)*o;return m};J.determinant=function(m){return m.m00*m.m03-m.m01*m.m02};J.multiply=function(m,t,n){let r=t.m00,a=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=n.m00,c=n.m01,h=n.m02,f=n.m03,M=n.m04,x=n.m05;m.m00=r*s+u*c;m.m01=a*s+e*c;m.m02=r*h+u*f;m.m03=a*h+e*f;m.m04=r*M+u*x+i;m.m05=a*M+e*x+o;return m};J.mul=J.multiply;J.rotate=function(m,t,n){let r=t.m00,a=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=Math.sin(n),c=Math.cos(n);m.m00=r*c+u*s;m.m01=a*c+e*s;m.m02=r*-s+u*c;m.m03=a*-s+e*c;m.m04=i;m.m05=o;return m};J.scale=function(m,t,n){let r=t.m00,a=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=n.x,c=n.y;m.m00=r*s;m.m01=a*s;m.m02=u*c;m.m03=e*c;m.m04=i;m.m05=o;return m};J.translate=function(m,t,n){let r=t.m00,a=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=n.x,c=n.y;m.m00=r;m.m01=a;m.m02=u;m.m03=e;m.m04=r*s+u*c+i;m.m05=a*s+e*c+o;return m};J.fromRotation=function(m,t){let n=Math.sin(t),r=Math.cos(t);m.m00=r;m.m01=n;m.m02=-n;m.m03=r;m.m04=0;m.m05=0;return m};J.fromScaling=function(m,t){m.m00=t.m00;m.m01=0;m.m02=0;m.m03=t.m01;m.m04=0;m.m05=0;return m};J.fromTranslation=function(m,t){m.m00=1;m.m01=0;m.m02=0;m.m03=1;m.m04=t.x;m.m05=t.y;return m};J.str=function(m){return`mat23(${m.m00}, ${m.m01}, ${m.m02}, ${m.m03}, ${m.m04}, ${m.m05})`};J.array=function(m,t){m[0]=t.m00;m[1]=t.m01;m[2]=t.m02;m[3]=t.m03;m[4]=t.m04;m[5]=t.m05;return m};J.frob=function(m){return Math.sqrt(Math.pow(m.m00,2)+Math.pow(m.m01,2)+Math.pow(m.m02,2)+Math.pow(m.m03,2)+Math.pow(m.m04,2)+Math.pow(m.m05,2)+1)};J.add=function(m,t,n){m.m00=t.m00+n.m00;m.m01=t.m01+n.m01;m.m02=t.m02+n.m02;m.m03=t.m03+n.m03;m.m04=t.m04+n.m04;m.m05=t.m05+n.m05;return m};J.subtract=function(m,t,n){m.m00=t.m00-n.m00;m.m01=t.m01-n.m01;m.m02=t.m02-n.m02;m.m03=t.m03-n.m03;m.m04=t.m04-n.m04;m.m05=t.m05-n.m05;return m};J.sub=J.subtract;J.multiplyScalar=function(m,t,n){m.m00=t.m00*n;m.m01=t.m01*n;m.m02=t.m02*n;m.m03=t.m03*n;m.m04=t.m04*n;m.m05=t.m05*n;return m};J.multiplyScalarAndAdd=function(m,t,n,r){m.m00=t.m00+n.m00*r;m.m01=t.m01+n.m01*r;m.m02=t.m02+n.m02*r;m.m03=t.m03+n.m03*r;m.m04=t.m04+n.m04*r;m.m05=t.m05+n.m05*r;return m};J.exactEquals=function(m,t){return m.m00===t.m00&&m.m01===t.m01&&m.m02===t.m02&&m.m03===t.m03&&m.m04===t.m04&&m.m05===t.m05};J.equals=function(m,t){let n=m.m00,a=m.m01,u=m.m02,e=m.m03,i=m.m04,o=m.m05;let s=t.m00,c=t.m01,h=t.m02,f=t.m03,M=t.m04,x=t.m05;return Math.abs(n-s)<=r*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-c)<=r*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-h)<=r*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(e-f)<=r*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(i-M)<=r*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(o-x)<=r*Math.max(1,Math.abs(o),Math.abs(x))};class K{constructor(m,t,n,r,a,u,e,i,o,s,c,h,f,M,x,y){this.m00=m;this.m01=t;this.m02=n;this.m03=r;this.m04=a;this.m05=u;this.m06=e;this.m07=i;this.m08=o;this.m09=s;this.m10=c;this.m11=h;this.m12=f;this.m13=M;this.m14=x;this.m15=y}}let $={};$.create=function(){return new K(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)};$.new=function(m,t,n,r,a,u,e,i,o,s,c,h,f,M,x,y){return new K(m,t,n,r,a,u,e,i,o,s,c,h,f,M,x,y)};$.clone=function(m){return new K(m.m00,m.m01,m.m02,m.m03,m.m04,m.m05,m.m06,m.m07,m.m08,m.m09,m.m10,m.m11,m.m12,m.m13,m.m14,m.m15)};$.copy=function(m,t){m.m00=t.m00;m.m01=t.m01;m.m02=t.m02;m.m03=t.m03;m.m04=t.m04;m.m05=t.m05;m.m06=t.m06;m.m07=t.m07;m.m08=t.m08;m.m09=t.m09;m.m10=t.m10;m.m11=t.m11;m.m12=t.m12;m.m13=t.m13;m.m14=t.m14;m.m15=t.m15;return m};$.set=function(m,t,n,r,a,u,e,i,o,s,c,h,f,M,x,y,l){m.m00=t;m.m01=n;m.m02=r;m.m03=a;m.m04=u;m.m05=e;m.m06=i;m.m07=o;m.m08=s;m.m09=c;m.m10=h;m.m11=f
;m.m12=M;m.m13=x;m.m14=y;m.m15=l;return m};$.identity=function(m){m.m00=1;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=1;m.m06=0;m.m07=0;m.m08=0;m.m09=0;m.m10=1;m.m11=0;m.m12=0;m.m13=0;m.m14=0;m.m15=1;return m};$.transpose=function(m,t){if(m===t){let n=t.m01,r=t.m02,a=t.m03,u=t.m06,e=t.m07,i=t.m11;m.m01=t.m04;m.m02=t.m08;m.m03=t.m12;m.m04=n;m.m06=t.m09;m.m07=t.m13;m.m08=r;m.m09=u;m.m11=t.m14;m.m12=a;m.m13=e;m.m14=i}else{m.m00=t.m00;m.m01=t.m04;m.m02=t.m08;m.m03=t.m12;m.m04=t.m01;m.m05=t.m05;m.m06=t.m09;m.m07=t.m13;m.m08=t.m02;m.m09=t.m06;m.m10=t.m10;m.m11=t.m14;m.m12=t.m03;m.m13=t.m07;m.m14=t.m11;m.m15=t.m15}return m};$.invert=function(m,t){let n=t.m00,r=t.m01,a=t.m02,u=t.m03,e=t.m04,i=t.m05,o=t.m06,s=t.m07,c=t.m08,h=t.m09,f=t.m10,M=t.m11,x=t.m12,y=t.m13,l=t.m14,b=t.m15;let z=n*i-r*e;let w=n*o-a*e;let d=n*s-u*e;let g=r*o-a*i;let p=r*s-u*i;let q=a*s-u*o;let v=c*y-h*x;let A=c*l-f*x;let S=c*b-M*x;let I=h*l-f*y;let L=h*b-M*y;let E=f*b-M*l;let P=z*E-w*L+d*I+g*S-p*A+q*v;if(!P){return null}P=1/P;m.m00=(i*E-o*L+s*I)*P;m.m01=(a*L-r*E-u*I)*P;m.m02=(y*q-l*p+b*g)*P;m.m03=(f*p-h*q-M*g)*P;m.m04=(o*S-e*E-s*A)*P;m.m05=(n*E-a*S+u*A)*P;m.m06=(l*d-x*q-b*w)*P;m.m07=(c*q-f*d+M*w)*P;m.m08=(e*L-i*S+s*v)*P;m.m09=(r*S-n*L-u*v)*P;m.m10=(x*p-y*d+b*z)*P;m.m11=(h*d-c*p-M*z)*P;m.m12=(i*A-e*I-o*v)*P;m.m13=(n*I-r*A+a*v)*P;m.m14=(y*w-x*g-l*z)*P;m.m15=(c*g-h*w+f*z)*P;return m};$.adjoint=function(m,t){let n=t.m00,r=t.m01,a=t.m02,u=t.m03,e=t.m04,i=t.m05,o=t.m06,s=t.m07,c=t.m08,h=t.m09,f=t.m10,M=t.m11,x=t.m12,y=t.m13,l=t.m14,b=t.m15;m.m00=i*(f*b-M*l)-h*(o*b-s*l)+y*(o*M-s*f);m.m01=-(r*(f*b-M*l)-h*(a*b-u*l)+y*(a*M-u*f));m.m02=r*(o*b-s*l)-i*(a*b-u*l)+y*(a*s-u*o);m.m03=-(r*(o*M-s*f)-i*(a*M-u*f)+h*(a*s-u*o));m.m04=-(e*(f*b-M*l)-c*(o*b-s*l)+x*(o*M-s*f));m.m05=n*(f*b-M*l)-c*(a*b-u*l)+x*(a*M-u*f);m.m06=-(n*(o*b-s*l)-e*(a*b-u*l)+x*(a*s-u*o));m.m07=n*(o*M-s*f)-e*(a*M-u*f)+c*(a*s-u*o);m.m08=e*(h*b-M*y)-c*(i*b-s*y)+x*(i*M-s*h);m.m09=-(n*(h*b-M*y)-c*(r*b-u*y)+x*(r*M-u*h));m.m10=n*(i*b-s*y)-e*(r*b-u*y)+x*(r*s-u*i);m.m11=-(n*(i*M-s*h)-e*(r*M-u*h)+c*(r*s-u*i));m.m12=-(e*(h*l-f*y)-c*(i*l-o*y)+x*(i*f-o*h));m.m13=n*(h*l-f*y)-c*(r*l-a*y)+x*(r*f-a*h);m.m14=-(n*(i*l-o*y)-e*(r*l-a*y)+x*(r*o-a*i));m.m15=n*(i*f-o*h)-e*(r*f-a*h)+c*(r*o-a*i);return m};$.determinant=function(m){let t=m.m00,n=m.m01,r=m.m02,a=m.m03,u=m.m04,e=m.m05,i=m.m06,o=m.m07,s=m.m08,c=m.m09,h=m.m10,f=m.m11,M=m.m12,x=m.m13,y=m.m14,l=m.m15;let b=t*e-n*u;let z=t*i-r*u;let w=t*o-a*u;let d=n*i-r*e;let g=n*o-a*e;let p=r*o-a*i;let q=s*x-c*M;let v=s*y-h*M;let A=s*l-f*M;let S=c*y-h*x;let I=c*l-f*x;let L=h*l-f*y;return b*L-z*I+w*S+d*A-g*v+p*q};$.multiply=function(m,t,n){let r=t.m00,a=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=t.m06,c=t.m07,h=t.m08,f=t.m09,M=t.m10,x=t.m11,y=t.m12,l=t.m13,b=t.m14,z=t.m15;let w=n.m00,d=n.m01,g=n.m02,p=n.m03;m.m00=w*r+d*i+g*h+p*y;m.m01=w*a+d*o+g*f+p*l;m.m02=w*u+d*s+g*M+p*b;m.m03=w*e+d*c+g*x+p*z;w=n.m04;d=n.m05;g=n.m06;p=n.m07;m.m04=w*r+d*i+g*h+p*y;m.m05=w*a+d*o+g*f+p*l;m.m06=w*u+d*s+g*M+p*b;m.m07=w*e+d*c+g*x+p*z;w=n.m08;d=n.m09;g=n.m10;p=n.m11;m.m08=w*r+d*i+g*h+p*y;m.m09=w*a+d*o+g*f+p*l;m.m10=w*u+d*s+g*M+p*b;m.m11=w*e+d*c+g*x+p*z;w=n.m12;d=n.m13;g=n.m14;p=n.m15;m.m12=w*r+d*i+g*h+p*y;m.m13=w*a+d*o+g*f+p*l;m.m14=w*u+d*s+g*M+p*b;m.m15=w*e+d*c+g*x+p*z;return m};$.mul=$.multiply;$.translate=function(m,t,n){let r=n.x,a=n.y,u=n.z,e,i,o,s,c,h,f,M,x,y,l,b;if(t===m){m.m12=t.m00*r+t.m04*a+t.m08*u+t.m12;m.m13=t.m01*r+t.m05*a+t.m09*u+t.m13;m.m14=t.m02*r+t.m06*a+t.m10*u+t.m14;m.m15=t.m03*r+t.m07*a+t.m11*u+t.m15}else{e=t.m00;i=t.m01;o=t.m02;s=t.m03;c=t.m04;h=t.m05;f=t.m06;M=t.m07;x=t.m08;y=t.m09;l=t.m10;b=t.m11;m.m00=e;m.m01=i;m.m02=o;m.m03=s;m.m04=c;m.m05=h;m.m06=f;m.m07=M;m.m08=x;m.m09=y;m.m10=l;m.m11=b;m.m12=e*r+c*a+x*u+t.m12;m.m13=i*r+h*a+y*u+t.m13;m.m14=o*r+f*a+l*u+t.m14;m.m15=s*r+M*a+b*u+t.m15}return m};$.scale=function(m,t,n){let r=n.x,a=n.y,u=n.z;m.m00=t.m00*r;m.m01=t.m01*r;m.m02=t.m02*r;m.m03=t.m03*r;m.m04=t.m04*a;m.m05=t.m05*a;m.m06=t.m06*a;m.m07=t.m07*a;m.m08=t.m08*u;m.m09=t.m09*u;m.m10=t.m10*u;m.m11=t.m11*u;m.m12=t.m12;m.m13=t.m13;m.m14=t.m14;m.m15=t.m15;return m};$.rotate=function(m,t,n,a){let u=a.x,e=a.y,i=a.z;let o,s,c,h,f,M,x,y,l,b,z,w,d,g,p,q,v,A,S,I,L,E,P,D;let R=Math.sqrt(u*u+e*e+i*i);if(Math.abs(R)<r){return null}R=1/R;u*=R;e*=R;i*=R;o=Math.sin(n);s=Math.cos(n);c=1-s;h=t.m00;f=t.m01;M=t.m02;x=t.m03;y=t.m04;l=t.m05;b=t.m06;z=t.m07;w=t.m08;d=t.m09;g=t.m10;p=t.m11;q=u*u*c+s;v=e*u*c+i*o;A=i*u*c-e*o;S=u*e*c-i*o;I=e*e*c+s;L=i*e*c+u*o;E=u*i*c+e*o;P=e*i*c-u*o;D=i*i*c+s;m.m00=h*q+y*v+w*A;m.m01=f*q+l*v+d*A;m.m02=M*q+b*v+g*A;m.m03=x*q+z*v+p*A;m.m04=h*S+y*I+w*L;m.m05=f*S+l*I+d*L;m.m06=M*S+b*I+g*L;m.m07=x*S+z*I+p*L;m.m08=h*E+y*P+w*D;m.m09=f*E+l*P+d*D;m.m10=M*E+b*P+g*D;m.m11=x*E+z*P+p*D;if(t!==m){m.m12=t.m12;m.m13=t.m13;m.m14=t.m14;m.m15=t.m15}return m};$.rotateX=function(m,t,n){let r=Math.sin(n),a=Math.cos(n),u=t.m04,e=t.m05,i=t.m06,o=t.m07,s=t.m08,c=t.m09,h=t.m10,f=t.m11;if(t!==m){m.m00=t.m00;m.m01=t.m01;m.m02=t.m02;m.m03=t.m03;m.m12=t.m12;m.m13=t.m13;m.m14=t.m14;m.m15=t.m15}m.m04=u*a+s*r;m.m05=e*a+c*r;m.m06=i*a+h*r;m.m07=o*a+f*r;m.m08=s*a-u*r;m.m09=c*a-e*r;m.m10=h*a-i*r;m.m11=f*a-o*r;return m};$.rotateY=function(m,t,n){let r=Math.sin(n),a=Math.cos(n),u=t.m00,e=t.m01,i=t.m02,o=t.m03,s=t.m08,c=t.m09,h=t.m10,f=t.m11;if(t!==m){m.m04=t.m04;m.m05=t.m05;m.m06=t.m06;m.m07=t.m07;m.m12=t.m12;m.m13=t.m13;m.m14=t.m14;m.m15=t.m15}m.m00=u*a-s*r;m.m01=e*a-c*r;m.m02=i*a-h*r;m.m03=o*a-f*r;m.m08=u*r+s*a;m.m09=e*r+c*a;m.m10=i*r+h*a;m.m11=o*r+f*a;return m};$.rotateZ=function(m,t,n){let r=Math.sin(n),a=Math.cos(n),u=t.m00,e=t.m01,i=t.m02,o=t.m03,s=t.m04,c=t.m05,h=t.m06,f=t.m07;if(t!==m){m.m08=t.m08;m.m09=t.m09;m.m10=t.m10;m.m11=t.m11;m.m12=t.m12;m.m13=t.m13;m.m14=t.m14;m.m15=t.m15}m.m00=u*a+s*r;m.m01=e*a+c*r;m.m02=i*a+h*r;m.m03=o*a+f*r;m.m04=s*a-u*r;m.m05=c*a-e*r;m.m06=h*a-i*r;m.m07=f*a-o*r;return m};$.fromTranslation=function(m,t){m.m00=1;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=1;m.m06=0;m.m07=0;m.m08=0;m.m09=0;m.m10=1;m.m11=0;m.m12=t.x;m.m13=t.y;m.m14=t.z;m.m15=1;return m};$.fromScaling=function(m,t){m.m00=t.x;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=t.y;m.m06=0;m.m07=0;m.m08=0;m.m09=0;m.m10=t.z;m.m11=0;m.m12=0;m.m13=0;m.m14=0;m.m15=1;return m};$.fromRotation=function(m,t,n){let a=n.x,u=n.y,e=n.z;let i=Math.sqrt(a*a+u*u+e*e);let o,s,c;if(Math.abs(i)<r){return null}i=1/i;a*=i;u*=i;e*=i;o=Math.sin(t);s=Math.cos(t);c=1-s;m.m00=a*a*c+s;m.m01=u*a*c+e*o;m.m02=e*a*c-u*o;m.m03=0;m.m04=a*u*c-e*o;m.m05=u*u*c+s;m.m06=e*u*c+a*o;m.m07=0;m.m08=a*e*c+u*o;m.m09=u*e*c-a*o;m.m10=e*e*c+s;m.m11=0;m.m12=0;m.m13=0;m.m14=0;m.m15=1;return m};$.fromXRotation=function(m,t){let n=Math.sin(t),r=Math.cos(t);m.m00=1;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=r;m.m06=n;m.m07=0;m.m08=0;m.m09=-n;m.m10=r;m.m11=0;m.m12=0;m.m13=0;m.m14=0;m.m15=1;return m};$.fromYRotation=function(m,t){let n=Math.sin(t),r=Math.cos(t);m.m00=r;m.m01=0;m.m02=-n;m.m03=0;m.m04=0;m.m05=1;m.m06=0;m.m07=0;m.m08=n;m.m09=0;m.m10=r;m.m11=0;m.m12=0;m.m13=0;m.m14=0;m.m15=1;return m};$.fromZRotation=function(m,t){let n=Math.sin(t),r=Math.cos(t);m.m00=r;m.m01=n;m.m02=0;m.m03=0;m.m04=-n;m.m05=r;m.m06=0;m.m07=0;m.m08=0;m.m09=0;m.m10=1;m.m11=0;m.m12=0;m.m13=0;m.m14=0;m.m15=1;return m};$.fromRT=function(m,t,n){let r=t.x,a=t.y,u=t.z,e=t.w;let i=r+r;let o=a+a;let s=u+u;let c=r*i;let h=r*o;let f=r*s;let M=a*o;let x=a*s;let y=u*s;let l=e*i;let b=e*o;let z=e*s;m.m00=1-(M+y);m.m01=h+z;m.m02=f-b;m.m03=0;m.m04=h-z;m.m05=1-(c+y);m.m06=x+l;m.m07=0;m.m08=f+b;m.m09=x-l;m.m10=1-(c+M);m.m11=0;m.m12=n.x;m.m13=n.y;m.m14=n.z;m.m15=1;return m};$.getTranslation=function(m,t){m.x=t.m12;m.y=t.m13;m.z=t.m14;return m};$.getScaling=function(m,t){let n=t.m00,r=t.m01,a=t.m02,u=t.m04,e=t.m05,i=t.m06,o=t.m08,s=t.m09,c=t.m10;m.x=Math.sqrt(n*n+r*r+a*a);m.y=Math.sqrt(u*u+e*e+i*i);m.z=Math.sqrt(o*o+s*s+c*c);return m};$.getRotation=function(m,t){let n=t.m00+t.m05+t.m10;let r=0;if(n>0){r=Math.sqrt(n+1)*2;m.w=.25*r;m.x=(t.m06-t.m09)/r;m.y=(t.m08-t.m02)/r;m.z=(t.m01-t.m04)/r}else if(t.m00>t.m05&t.m00>t.m10){r=Math.sqrt(1+t.m00-t.m05-t.m10)*2;m.w=(t.m06-t.m09)/r;m.x=.25*r;m.y=(t.m01+t.m04)/r;m.z=(t.m08+t.m02)/r}else if(t.m05>t.m10){r=Math.sqrt(1+t.m05-t.m00-t.m10)*2;m.w=(t.m08-t.m02)/r;m.x=(t.m01+t.m04)/r;m.y=.25*r;m.z=(t.m06+t.m09)/r}else{r=Math.sqrt(1+t.m10-t.m00-t.m05)*2;m.w=(t.m01-t.m04)/r;m.x=(t.m08+t.m02)/r;m.y=(t.m06+t.m09)/r;m.z=.25*r}return m};$.fromRTS=function(m,t,n,r){let a=t.x,u=t.y,e=t.z,i=t.w;let o=a+a;let s=u+u;let c=e+e;let h=a*o;let f=a*s;let M=a*c;let x=u*s;let y=u*c;let l=e*c;let b=i*o;let z=i*s;let w=i*c;let d=r.x;let g=r.y;let p=r.z;m.m00=(1-(x+l))*d;m.m01=(f+w)*d;m.m02=(M-z)*d;m.m03=0;m.m04=(f-w)*g;m.m05=(1-(h+l))*g;m.m06=(y+b)*g;m.m07=0;m.m08=(M+z)*p;m.m09=(y-b)*p;m.m10=(1-(h+x))*p;m.m11=0;m.m12=n.x;m.m13=n.y;m.m14=n.z;m.m15=1;return m};$.fromRTSOrigin=function(m,t,n,r,a){let u=t.x,e=t.y,i=t.z,o=t.w;let s=u+u;let c=e+e;let h=i+i;let f=u*s;let M=u*c;let x=u*h;let y=e*c;let l=e*h;let b=i*h;let z=o*s;let w=o*c;let d=o*h;let g=r.x;let p=r.y;let q=r.z;let v=a.x;let A=a.y;let S=a.z;m.m00=(1-(y+b))*g;m.m01=(M+d)*g;m.m02=(x-w)*g;m.m03=0;m.m04=(M-d)*p;m.m05=(1-(f+b))*p;m.m06=(l+z)*p;m.m07=0;m.m08=(x+w)*q;m.m09=(l-z)*q;m.m10=(1-(f+y))*q;m.m11=0;m.m12=n.x+v-(m.m00*v+m.m04*A+m.m08*S);m.m13=n.y+A-(m.m01*v+m.m05*A+m.m09*S);m.m14=n.z+S-(m.m02*v+m.m06*A+m.m10*S);m.m15=1;return m};$.fromQuat=function(m,t){let n=t.x,r=t.y,a=t.z,u=t.w;let e=n+n;let i=r+r;let o=a+a;let s=n*e;let c=r*e;let h=r*i;let f=a*e;let M=a*i;let x=a*o;let y=u*e;let l=u*i;let b=u*o;m.m00=1-h-x;m.m01=c+b;m.m02=f-l;m.m03=0;m.m04=c-b;m.m05=1-s-x;m.m06=M+y;m.m07=0;m.m08=f+l;m.m09=M-y;m.m10=1-s-h;m.m11=0;m.m12=0;m.m13=0;m.m14=0;m.m15=1;return m};$.frustum=function(m,t,n,r,a,u,e){let i=1/(n-t);let o=1/(a-r);let s=1/(u-e);m.m00=u*2*i;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=u*2*o;m.m06=0;m.m07=0;m.m08=(n+t)*i;m.m09=(a+r)*o;m.m10=(e+u)*s;m.m11=-1;m.m12=0;m.m13=0;m.m14=e*u*2*s;m.m15=0;return m};$.perspective=function(m,t,n,r,a){let u=1/Math.tan(t/2);let e=1/(r-a);m.m00=u/n;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=u;m.m06=0;m.m07=0;m.m08=0;m.m09=0;m.m10=(a+r)*e;m.m11=-1;m.m12=0;m.m13=0;m.m14=2*a*r*e;m.m15=0;return m};$.perspectiveFromFieldOfView=function(m,t,n,r){let a=Math.tan(t.upDegrees*Math.PI/180);let u=Math.tan(t.downDegrees*Math.PI/180);let e=Math.tan(t.leftDegrees*Math.PI/180);let i=Math.tan(t.rightDegrees*Math.PI/180);let o=2/(e+i);let s=2/(a+u);m.m00=o;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=s;m.m06=0;m.m07=0;m.m08=-((e-i)*o*.5);m.m09=(a-u)*s*.5;m.m10=r/(n-r);m.m11=-1;m.m12=0;m.m13=0;m.m14=r*n/(n-r);m.m15=0;return m};$.ortho=function(m,t,n,r,a,u,e){let i=1/(t-n);let o=1/(r-a);let s=1/(u-e);m.m00=-2*i;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=-2*o;m.m06=0;m.m07=0;m.m08=0;m.m09=0;m.m10=2*s;m.m11=0;m.m12=(t+n)*i;m.m13=(a+r)*o;m.m14=(e+u)*s;m.m15=1;return m};$.lookAt=function(m,t,n,a){let u,e,i,o,s,c,h,f,M,x;let y=t.x;let l=t.y;let b=t.z;let z=a.x;let w=a.y;let d=a.z;let g=n.x;let p=n.y;let q=n.z;if(Math.abs(y-g)<r&&Math.abs(l-p)<r&&Math.abs(b-q)<r){return $.identity(m)}h=y-g;f=l-p;M=b-q;x=1/Math.sqrt(h*h+f*f+M*M);h*=x;f*=x;M*=x;u=w*M-d*f;e=d*h-z*M;i=z*f-w*h;x=Math.sqrt(u*u+e*e+i*i);if(!x){u=0;e=0;i=0}else{x=1/x;u*=x;e*=x;i*=x}o=f*i-M*e;s=M*u-h*i;c=h*e-f*u;x=Math.sqrt(o*o+s*s+c*c);if(!x){o=0;s=0;c=0}else{x=1/x;o*=x;s*=x;c*=x}m.m00=u;m.m01=o;m.m02=h;m.m03=0;m.m04=e;m.m05=s;m.m06=f;m.m07=0;m.m08=i;m.m09=c;m.m10=M;m.m11=0;m.m12=-(u*y+e*l+i*b);m.m13=-(o*y+s*l+c*b);m.m14=-(h*y+f*l+M*b);m.m15=1;return m};$.str=function(m){return`mat4(${m.m00}, ${m.m01}, ${m.m02}, ${m.m03}, ${m.m04}, ${m.m05}, ${m.m06}, ${m.m07}, ${m.m08}, ${m.m09}, ${m.m10}, ${m.m11}, ${m.m12}, ${m.m13}, ${m.m14}, ${m.m15})`};$.array=function(m,t){m[0]=t.m00;m[1]=t.m01;m[2]=t.m02;m[3]=t.m03;m[4]=t.m04;m[5]=t.m05;m[6]=t.m06;m[7]=t.m07;m[8]=t.m08;m[9]=t.m09;m[10]=t.m10;m[11]=t.m11;m[12]=t.m12;m[13]=t.m13;m[14]=t.m14;m[15]=t.m15;return m};$.frob=function(m){return Math.sqrt(Math.pow(m.m00,2)+Math.pow(m.m01,2)+Math.pow(m.m02,2)+Math.pow(m.m03,2)+Math.pow(m.m04,2)+Math.pow(m.m05,2)+Math.pow(m.m06,2)+Math.pow(m.m07,2)+Math.pow(m.m08,2)+Math.pow(m.m09,2)+Math.pow(m.m10,2)+Math.pow(m.m11,2)+Math.pow(m.m12,2)+Math.pow(m.m13,2)+Math.pow(m.m14,2)+Math.pow(m.m15,2))};$.add=function(m,t,n){m.m00=t.m00+n.m00;m.m01=t.m01+n.m01;m.m02=t.m02+n.m02;m.m03=t.m03+n.m03;m.m04=t.m04+n.m04;m.m05=t.m05+n.m05;m.m06=t.m06+n.m06;m.m07=t.m07+n.m07;m.m08=t.m08+n.m08;m.m09=t.m09+n.m09;m.m10=t.m10+n.m10;m.m11=t.m11+n.m11;m.m12=t.m12+n.m12;m.m13=t.m13+n.m13;m.m14=t.m14+n.m14;m.m15=t.m15+n.m15;return m};$.subtract=function(m,t,n){m.m00=t.m00-n.m00;m.m01=t.m01-n.m01;m.m02=t.m02-n.m02;m.m03=t.m03-n.m03;m.m04=t.m04-n.m04;m.m05=t.m05-n.m05;m.m06=t.m06-n.m06;m.m07=t.m07-n.m07;m.m08=t.m08-n.m08;m.m09=t.m09-n.m09;m.m10=t.m10-n.m10;m.m11=t.m11-n.m11;m.m12=t.m12-n.m12;m.m13=t.m13-n.m13;m.m14=t.m14-n.m14;m.m15=t.m15-n.m15;return m};$.sub=$.subtract;$.multiplyScalar=function(m,t,n){m.m00=t.m00*n;m.m01=t.m01*n;m.m02=t.m02*n;m.m03=t.m03*n;m.m04=t.m04*n;m.m05=t.m05*n;m.m06=t.m06*n;m.m07=t.m07*n;m.m08=t.m08*n;m.m09=t.m09*n;m.m10=t.m10*n;m.m11=t.m11*n;m.m12=t.m12*n;m.m13=t.m13*n;m.m14=t.m14*n;m.m15=t.m15*n;return m};$.multiplyScalarAndAdd=function(m,t,n,r){m.m00=t.m00+n.m00*r;m.m01=t.m01+n.m01*r;m.m02=t.m02+n.m02*r;m.m03=t.m03+n.m03*r;m.m04=t.m04+n.m04*r;m.m05=t.m05+n.m05*r;m.m06=t.m06+n.m06*r;m.m07=t.m07+n.m07*r;m.m08=t.m08+n.m08*r;m.m09=t.m09+n.m09*r;m.m10=t.m10+n.m10*r;m.m11=t.m11+n.m11*r;m.m12=t.m12+n.m12*r;m.m13=t.m13+n.m13*r;m.m14=t.m14+n.m14*r;m.m15=t.m15+n.m15*r;return m};$.exactEquals=function(m,t){return m.m00===t.m00&&m.m01===t.m01&&m.m02===t.m02&&m.m03===t.m03&&m.m04===t.m04&&m.m05===t.m05&&m.m06===t.m06&&m.m07===t.m07&&m.m08===t.m08&&m.m09===t.m09&&m.m10===t.m10&&m.m11===t.m11&&m.m12===t.m12&&m.m13===t.m13&&m.m14===t.m14&&m.m15===t.m15};$.equals=function(m,t){let n=m.m00,a=m.m01,u=m.m02,e=m.m03,i=m.m04,o=m.m05,s=m.m06,c=m.m07,h=m.m08,f=m.m09,M=m.m10,x=m.m11,y=m.m12,l=m.m13,b=m.m14,z=m.m15;let w=t.m00,d=t.m01,g=t.m02,p=t.m03,q=t.m04,v=t.m05,A=t.m06,S=t.m07,I=t.m08,L=t.m09,E=t.m10,P=t.m11,D=t.m12,R=t.m13,T=t.m14,j=t.m15;return Math.abs(n-w)<=r*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(a-d)<=r*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(u-g)<=r*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(e-p)<=r*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(i-q)<=r*Math.max(1,Math.abs(i),Math.abs(q))&&Math.abs(o-v)<=r*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(s-A)<=r*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(c-S)<=r*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(h-I)<=r*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(f-L)<=r*Math.max(1,Math.abs(f),Math.abs(L))&&Math.abs(M-E)<=r*Math.max(1,Math.abs(M),Math.abs(E))&&Math.abs(x-P)<=r*Math.max(1,Math.abs(x),Math.abs(P))&&Math.abs(y-D)<=r*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(l-R)<=r*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(b-T)<=r*Math.max(1,Math.abs(b),Math.abs(T))&&Math.abs(z-j)<=r*Math.max(1,Math.abs(z),Math.abs(j))};class mm{constructor(m,t,n){this.r=m;this.g=t;this.b=n}}let tm={};tm.create=function(){return new mm(1,1,1)};tm.new=function(m,t,n){return new mm(m,t,n)};tm.clone=function(m){return new mm(m.r,m.g,m.b,m.a)};tm.copy=function(m,t){m.r=t.r;m.g=t.g;m.b=t.b;return m};tm.set=function(m,t,n,r){m.r=t;m.g=n;m.b=r;return m};tm.fromHex=function(m,t){let n=(t>>16)/255;let r=(t>>8&255)/255;let a=(t&255)/255;m.r=n;m.g=r;m.b=a;return m};tm.add=function(m,t,n){m.r=t.r+n.r;m.g=t.g+n.g;m.b=t.b+n.b;return m};tm.subtract=function(m,t,n){m.r=t.r-n.r;m.g=t.g-n.g;m.b=t.b-n.b;return m};tm.sub=tm.subtract;tm.multiply=function(m,t,n){m.r=t.r*n.r;m.g=t.g*n.g;m.b=t.b*n.b;return m};tm.mul=tm.multiply;tm.divide=function(m,t,n){m.r=t.r/n.r;m.g=t.g/n.g;m.b=t.b/n.b;return m};tm.div=tm.divide;tm.scale=function(m,t,n){m.r=t.r*n;m.g=t.g*n;m.b=t.b*n;return m};tm.lerp=function(m,t,n,r){let a=t.r,u=t.g,e=t.b;m.r=a+r*(n.r-a);m.g=u+r*(n.g-u);m.b=e+r*(n.b-e);return m};tm.str=function(m){return`color3(${m.r}, ${m.g}, ${m.b})`};tm.array=function(m,t){m[0]=t.r;m[1]=t.g;m[2]=t.b;return m};tm.exactEquals=function(m,t){return m.r===t.r&&m.g===t.g&&m.b===t.b};tm.equals=function(m,t){let n=m.r,a=m.g,u=m.b;let e=t.r,i=t.g,o=t.b;return Math.abs(n-e)<=r*Math.max(1,Math.abs(n),Math.abs(e))&&Math.abs(a-i)<=r*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(u-o)<=r*Math.max(1,Math.abs(u),Math.abs(o))};tm.hex=function(m){return m.r*255<<16|m.g*255<<8|m.b*255};class nm{constructor(m,t,n,r){this.r=m;this.g=t;this.b=n;this.a=r}}let rm={};rm.create=function(){return new nm(1,1,1,1)};rm.new=function(m,t,n,r){return new nm(m,t,n,r)};rm.clone=function(m){return new nm(m.r,m.g,m.b,m.a)};rm.copy=function(m,t){m.r=t.r;m.g=t.g;m.b=t.b;m.a=t.a;return m};rm.set=function(m,t,n,r,a){m.r=t;m.g=n;m.b=r;m.a=a;return m};rm.fromHex=function(m,t){let n=(t>>24)/255;let r=(t>>16&255)/255;let a=(t>>8&255)/255;let u=(t&255)/255;m.r=n;m.g=r;m.b=a;m.a=u;return m};rm.add=function(m,t,n){m.r=t.r+n.r;m.g=t.g+n.g;m.b=t.b+n.b;m.a=t.a+n.a;return m};rm.subtract=function(m,t,n){m.r=t.r-n.r;m.g=t.g-n.g;m.b=t.b-n.b;m.a=t.a-n.a;return m};rm.sub=rm.subtract;rm.multiply=function(m,t,n){m.r=t.r*n.r;m.g=t.g*n.g;m.b=t.b*n.b;m.a=t.a*n.a;return m};rm.mul=rm.multiply;rm.divide=function(m,t,n){m.r=t.r/n.r;m.g=t.g/n.g;m.b=t.b/n.b;m.a=t.a/n.a;return m};rm.div=rm.divide;rm.scale=function(m,t,n){m.r=t.r*n;m.g=t.g*n;m.b=t.b*n;m.a=t.a*n;return m};rm.lerp=function(m,t,n,r){let a=t.r,u=t.g,e=t.b,i=t.a;m.r=a+r*(n.r-a);m.g=u+r*(n.g-u);m.b=e+r*(n.b-e);m.a=i+r*(n.a-i);return m};rm.str=function(m){return`color4(${m.r}, ${m.g}, ${m.b}, ${m.a})`};rm.array=function(m,t){m[0]=t.r;m[1]=t.g;m[2]=t.b;m[3]=t.a;return m};rm.exactEquals=function(m,t){return m.r===t.r&&m.g===t.g&&m.b===t.b&&m.a===t.a};rm.equals=function(m,t){let n=m.r,a=m.g,u=m.b,e=m.a;let i=t.r,o=t.g,s=t.b,c=t.a;return Math.abs(n-i)<=r*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-o)<=r*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(u-s)<=r*Math.max(1,Math.abs(u),Math.abs(s))&&Math.abs(e-c)<=r*Math.max(1,Math.abs(e),Math.abs(c))};rm.hex=function(m){return m.r*255<<24|m.g*255<<16|m.b*255<<8|m.a*255};let am=Z;m.bits=am;m.vec2=Q;m.vec3=V;m.vec4=F;m.quat=k;m.mat2=W;m.mat23=J;m.mat3=C;m.mat4=$;m.color3=tm;m.color4=rm;m.EPSILON=r;m.equals=a;m.approx=u;m.clamp=e;m.clamp01=i;m.lerp=o;m.toRadian=s;m.toDegree=c;m.random=h;m.randomRange=f;m.randomRangeInt=M;m.nextPow2=x})(this.vmath=this.vmath||{});
//# sourceMappingURL=./dist/vmath.min.js.map